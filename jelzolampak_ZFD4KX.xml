<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.

// Number of lights
const int N=2;

// Type for the identifiers of lamps
typedef int[0,N-1] id_type;

broadcast chan all_toggle;
chan toggle[N];
broadcast chan interrupt;

// Data shared between a participant and the coordinator when voting</declaration><template><name x="5" y="5">Light</name><parameter>id_type id</parameter><declaration>// Place local declarations here.
clock lclock;
const int fromred =1 ;
const int fromgreen =2;
const int fromyellow=3;

int[0,4] interruptfrom = 0;
bool back_to_normal = false;</declaration><location id="id0" x="-112" y="352"><name x="-160" y="344">Blink</name><label kind="invariant" x="-144" y="368">lclock&lt;=1</label></location><location id="id1" x="256" y="352"><name x="280" y="344">No_Blink</name><label kind="invariant" x="232" y="368">lclock&lt;=1</label></location><location id="id2" x="88" y="184"><name x="120" y="176">Blink_Transfer</name><committed/></location><location id="id3" x="552" y="-144"><name x="542" y="-174">Yellow</name></location><location id="id4" x="88" y="-144"><name x="78" y="-174">Green</name></location><location id="id5" x="-432" y="-136"><name x="-442" y="-166">Red</name></location><init ref="id5"/><transition><source ref="id4"/><target ref="id3"/><label kind="synchronisation" x="256" y="-144">all_toggle?</label><nail x="288" y="-120"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="synchronisation" x="-192" y="-144">all_toggle?</label><nail x="-152" y="-120"/></transition><transition><source ref="id3"/><target ref="id5"/><label kind="synchronisation" x="48" y="-360">all_toggle?</label><nail x="80" y="-328"/></transition><transition><source ref="id1"/><target ref="id0"/><label kind="guard" x="48" y="400">lclock&gt;=1</label><label kind="assignment" x="48" y="384">lclock:=0</label><nail x="80" y="376"/></transition><transition><source ref="id1"/><target ref="id2"/><label kind="synchronisation" x="168" y="232">interrupt?</label><label kind="assignment" x="184" y="248">back_to_normal:=true</label></transition><transition><source ref="id0"/><target ref="id2"/><label kind="synchronisation" x="-48" y="224">interrupt?</label><label kind="assignment" x="-88" y="248">back_to_normal:=true</label><nail x="-8" y="264"/></transition><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="64" y="272">lclock&gt;=1</label><label kind="assignment" x="60" y="286">lclock:=0</label><nail x="84" y="318"/></transition><transition><source ref="id2"/><target ref="id0"/><label kind="guard" x="-264" y="184">back_to_normal==false</label><label kind="assignment" x="-192" y="160">lclock:=0</label><nail x="-112" y="184"/></transition><transition><source ref="id2"/><target ref="id5"/><label kind="guard" x="-536" y="72">interruptfrom==fromred &amp;&amp; back_to_normal==true</label><label kind="assignment" x="-368" y="96">back_to_normal:=false</label><nail x="-288" y="64"/></transition><transition><source ref="id2"/><target ref="id3"/><label kind="guard" x="336" y="32">interruptfrom==fromyellow &amp;&amp; back_to_normal==true</label><label kind="assignment" x="312" y="56">back_to_normal:=false</label><nail x="264" y="88"/></transition><transition><source ref="id2"/><target ref="id4"/><label kind="guard" x="96" y="-64">interruptfrom==fromgreen &amp;&amp; back_to_normal==true</label><label kind="assignment" x="128" y="-40">back_to_normal:=false</label><nail x="128" y="40"/></transition><transition><source ref="id3"/><target ref="id2"/><label kind="synchronisation" x="360" y="-112">interrupt?</label><label kind="assignment" x="256" y="-96">interruptfrom:=fromyellow</label><nail x="200" y="32"/></transition><transition><source ref="id4"/><target ref="id2"/><label kind="synchronisation" x="0" y="-96">interrupt?</label><label kind="assignment" x="-80" y="-80">interruptfrom:=fromgreen</label><nail x="56" y="40"/></transition><transition><source ref="id5"/><target ref="id2"/><label kind="synchronisation" x="-280" y="-96">interrupt?</label><label kind="assignment" x="-272" y="-80">interruptfrom:=fromred</label><nail x="-208" y="-32"/></transition><transition><source ref="id3"/><target ref="id5"/><label kind="synchronisation" x="48" y="-280">toggle[id]?</label><nail x="80" y="-248"/></transition><transition><source ref="id4"/><target ref="id3"/><label kind="synchronisation" x="224" y="-184">toggle[id]?</label><nail x="296" y="-160"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="synchronisation" x="-216" y="-184">toggle[id]?</label><nail x="-144" y="-168"/></transition></template><template><name>Controller</name><declaration>clock cclock;</declaration><location id="id6" x="-1376" y="-1456"><label kind="invariant" x="-1464" y="-1464">cclock&lt;=2</label></location><location id="id7" x="-1288" y="-1368"><label kind="invariant" x="-1320" y="-1352">cclock&lt;=1</label></location><location id="id8" x="-1192" y="-1456"><label kind="invariant" x="-1176" y="-1464">cclock&lt;=2</label></location><location id="id9" x="-1280" y="-1560"><name x="-1368" y="-1608">Loop_Start</name><label kind="invariant" x="-1352" y="-1592">cclock&lt;=1</label></location><location id="id10" x="-1280" y="-1712"><label kind="invariant" x="-1320" y="-1752">cclock&lt;=2</label></location><location id="id11" x="-1552" y="-1712"><name x="-1562" y="-1742">Start</name></location><init ref="id11"/><transition><source ref="id7"/><target ref="id7"/><label kind="synchronisation" x="-1240" y="-1368">interrupt!</label><nail x="-1248" y="-1376"/><nail x="-1248" y="-1352"/></transition><transition><source ref="id8"/><target ref="id8"/><label kind="synchronisation" x="-1160" y="-1504">interrupt!</label><nail x="-1184" y="-1496"/><nail x="-1160" y="-1480"/></transition><transition><source ref="id6"/><target ref="id6"/><label kind="synchronisation" x="-1480" y="-1496">interrupt!</label><nail x="-1408" y="-1480"/><nail x="-1376" y="-1496"/></transition><transition><source ref="id9"/><target ref="id9"/><label kind="synchronisation" x="-1240" y="-1600">interrupt!</label><nail x="-1248" y="-1600"/><nail x="-1232" y="-1576"/></transition><transition><source ref="id10"/><target ref="id10"/><label kind="synchronisation" x="-1224" y="-1736">interrupt!</label><nail x="-1240" y="-1736"/><nail x="-1232" y="-1704"/></transition><transition><source ref="id10"/><target ref="id9"/><label kind="guard" x="-1272" y="-1688">cclock&gt;=2</label><label kind="synchronisation" x="-1272" y="-1672">toggle[0]!</label><label kind="assignment" x="-1272" y="-1656">cclock:=0</label></transition><transition><source ref="id11"/><target ref="id11"/><label kind="synchronisation" x="-1664" y="-1680">interrupt!</label><nail x="-1576" y="-1664"/><nail x="-1600" y="-1688"/></transition><transition><source ref="id6"/><target ref="id9"/><label kind="guard" x="-1376" y="-1552">cclock&gt;=2</label><label kind="synchronisation" x="-1392" y="-1520">toggle[0]!</label><label kind="assignment" x="-1384" y="-1536">cclock:=0</label></transition><transition><source ref="id7"/><target ref="id6"/><label kind="guard" x="-1400" y="-1424">cclock&gt;=1</label><label kind="synchronisation" x="-1392" y="-1408">all_toggle!</label><label kind="assignment" x="-1392" y="-1392">cclock:=0</label></transition><transition><source ref="id8"/><target ref="id7"/><label kind="guard" x="-1224" y="-1392">cclock&gt;=2</label><label kind="synchronisation" x="-1224" y="-1424">toggle[1]!</label><label kind="assignment" x="-1224" y="-1408">cclock:=0</label></transition><transition><source ref="id9"/><target ref="id8"/><label kind="guard" x="-1240" y="-1560">cclock&gt;=1</label><label kind="synchronisation" x="-1240" y="-1544">all_toggle!</label><label kind="assignment" x="-1240" y="-1528">cclock:=0</label></transition><transition><source ref="id11"/><target ref="id10"/><label kind="synchronisation" x="-1440" y="-1752">toggle[0]!</label><label kind="assignment" x="-1440" y="-1736">cclock:=0</label></transition></template><system>// Place template instantiations here.

// List one or more processes to be composed into a system.
Light0 = Light(0);
Light1 = Light(1);
system Controller, Light1, Light0;</system></nta>